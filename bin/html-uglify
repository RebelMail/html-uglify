#!/usr/bin/env node

var uglifier = require('../lib/main.js'),
	program = require('commander'),
	fs = require('fs');

program
	.option("-i, --html <path>", "Input HTML File")
	.option("-o, --output <path>", "Path for Outputed HTML file")
	.parse(process.argv);

// console.log(program.html);
fs.readFile(program.html, 'utf8', function (err, html) {
	// console.log('html', html);
	// console.log('e', err);
	if (err){
		var f = program.html;
	} else {
		var f = html;
	};
	// console.log(f);
	uglifier.uglify(f, function(e,r){
		if (e) return console.log(e);
		console.log(r.map);
		if (program.output){
			return fs.writeFile(program.output, r.html);
		} else {
			return console.log(r.html);
		};
	});
});

